package vista;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.table.DefaultTableModel;

import controlador.Coordinador_Ventas;
import modelo.ventas.Venta_Dao;
import modelo.ventas.Venta_Dto;
import modelo.conexion.*;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class VentanaGestionVentas extends  JFrame implements ActionListener {

	//Se crea un cordinador_ventas porque tiene un metodo para poder regresar a la ventana de inicio
	private Coordinador_Ventas coordinador_ventas = new Coordinador_Ventas();
	private JFrame frame;
	private JButton botonInsertaVenta;
	private JButton botonMostrarVentas;
	private JButton botonEliminarVentas;
	private JComboBox comboBoxMostrar;
	private JButton botonExportar;
	
	private JTable tablaVentas;
	private DefaultTableModel modeloTablaVentas = new DefaultTableModel();
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					VentanaGestionVentas window = new VentanaGestionVentas(args);
					window.frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}


	public VentanaGestionVentas(String[] args) {
		setTitle("Ventana Gestion Ventas");
		try {
			for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
				if ("Nimbus".equals(info.getName())) {
					UIManager.setLookAndFeel(info.getClassName());
					break;
				}
			}
		} catch (Exception e) {
			
		}
		initialize(args);
	}

	/**
	 * Initialize the contents of the frame.
	 */
	private void initialize(String[] args) {
		tablaVentas = new JTable();
		JScrollPane scrollPane = new JScrollPane();
		scrollPane.setBounds(10, 11, 654, 174);
		getContentPane().add(scrollPane);
		scrollPane.setViewportView(tablaVentas);
		modeloTablaVentas.addColumn("Id venta");
		modeloTablaVentas.addColumn("Fecha venta");
		modeloTablaVentas.addColumn("ID cliente");
		modeloTablaVentas.addColumn("ID producto");
		modeloTablaVentas.addColumn("Cantidad");
		tablaVentas.setModel(modeloTablaVentas);
		setBounds(100, 100, 680, 295);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		getContentPane().setLayout(null);
		
		JButton botonVolver = new JButton("Volver");
		botonVolver.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				coordinador_ventas.mostrarVentanaMenuPrincipal(args);
				setVisible(false);
			}
		});
		botonVolver.setBounds(10, 229, 89, 23);
		getContentPane().add(botonVolver);
		
		botonInsertaVenta = new JButton("Insertar nueva venta");
		botonInsertaVenta.setBounds(10, 196, 135, 23);
		botonInsertaVenta.addActionListener(this);
		getContentPane().add(botonInsertaVenta);
		
		botonMostrarVentas = new JButton("Mostrar ventas");
		botonMostrarVentas.setBounds(168, 229, 144, 23);
		botonMostrarVentas.addActionListener(this);
		getContentPane().add(botonMostrarVentas);
		
		botonEliminarVentas = new JButton("Eliminar ventas");
		botonEliminarVentas.setBounds(352, 229, 144, 23);
		botonEliminarVentas.addActionListener(this);
		getContentPane().add(botonEliminarVentas);
		
		comboBoxMostrar = new JComboBox();
		comboBoxMostrar.setModel(new DefaultComboBoxModel(new String[] {"Mostrar por fecha.", "Mostrar por cliente."}));
		comboBoxMostrar.setToolTipText("");
		comboBoxMostrar.setBounds(168, 196, 144, 23);
		getContentPane().add(comboBoxMostrar);
		
		JComboBox comboBoxEliminar = new JComboBox();
		comboBoxEliminar.setModel(new DefaultComboBoxModel(new String[] {"Eliminar por ID.", "Eliminar por cliente."}));
		comboBoxEliminar.setBounds(352, 196, 144, 23);
		getContentPane().add(comboBoxEliminar);
		
		botonExportar = new JButton("Exportar datos");
		botonExportar.setBounds(543, 229, 121, 23);
		botonExportar.addActionListener(this);
		getContentPane().add(botonExportar);
		
		JComboBox comboBoxExportar = new JComboBox();
		comboBoxExportar.setModel(new DefaultComboBoxModel(new String[] {"Exportar XML", "Exportar CSV"}));
		comboBoxExportar.setBounds(543, 196, 121, 23);
		getContentPane().add(comboBoxExportar);
		setResizable(false);
		setLocationRelativeTo(null);
		setVisible(false);
	}
	public void setCoordinadorVentas(Coordinador_Ventas coordinador_ventas) {
		this.coordinador_ventas = coordinador_ventas;
	}

	public void actionPerformed(ActionEvent e, String args) {
		//si se pulsa boton insertar venta
		if(e.getSource().equals(botonInsertaVenta)){
			Conexion conexionEstablecida = new Conexion(args);
			Venta_Dto venta = new Venta_Dto();
			Venta_Dao.insertaVenta(conexionEstablecida.getConexion(), venta);
			
			
		//si se pulsa el boton de mostrar ventas	
		}else if(e.getSource().equals(botonMostrarVentas)) {
			
			
		//si se pulsa el boton de eliminar ventas
		}else if(e.getSource().equals(botonEliminarVentas)) {
			
			
			
		//si se pulsa el boton exportar
		}else if(e.getSource().equals(botonExportar)) {
			
		}
	}



		
}
